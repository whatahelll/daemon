{
  "_comment": "Terraria Dedicated Server - Corrigido",
  "meta": {
    "version": "PTDL_v2",
    "update_url": null
  },
  "exported_at": "2025-01-09T00:00:00+00:00",
  "uuid": "terraria",
  "name": "Terraria",
  "author": "support@pyro.host",
  "description": "Terraria dedicated server with TShock mod support",
  "features": [
    "pid_limit"
  ],
  "docker_images": {
    "Mono": "mono:latest",
    "Terraria Game": "ghcr.io/pterodactyl/games:terraria"
  },
  "file_denylist": [],
  "startup": "./TerrariaServer.bin.x86_64 -config serverconfig.txt -port {{SERVER_PORT}} -maxplayers {{MAX_PLAYERS}} -world {{WORLD_PATH}} -worldname \"{{WORLD_NAME}}\" -password \"{{SERVER_PASSWORD}}\" -motd \"{{SERVER_MOTD}}\" -lang {{LANGUAGE}} -autocreate {{WORLD_SIZE}} -difficulty {{DIFFICULTY}} -seed \"{{WORLD_SEED}}\"",
  "config": {
    "files": {
      "serverconfig.txt": {
        "parser": "file",
        "find": {
          "world": "{{WORLD_PATH}}",
          "port": "{{SERVER_PORT}}",
          "maxplayers": "{{MAX_PLAYERS}}",
          "password": "{{SERVER_PASSWORD}}",
          "motd": "{{SERVER_MOTD}}",
          "worldname": "{{WORLD_NAME}}",
          "autocreate": "{{WORLD_SIZE}}",
          "difficulty": "{{DIFFICULTY}}",
          "seed": "{{WORLD_SEED}}",
          "language": "{{LANGUAGE}}"
        }
      }
    },
    "startup": {
      "done": "Server started"
    },
    "stop": "exit",
    "logs": {
      "custom": false,
      "location": "ServerLog.txt"
    }
  },
  "scripts": {
    "installation": {
      "script": "#!/bin/bash\ncd /mnt/server\n\necho \"ðŸ“¥ Installing Terraria server...\"\n\n# Update packages\napt update\napt install -y curl unzip wget jq\n\n# Download TShock (latest stable)\necho \"ðŸ“¥ Downloading TShock for Terraria...\"\nTSHOCK_VERSION=\"5.2.0\"\nDOWNLOAD_URL=\"https://github.com/Pryaxis/TShock/releases/download/v${TSHOCK_VERSION}/TShock-${TSHOCK_VERSION}-linux-x64-Release.zip\"\n\necho \"ðŸ”— Download URL: $DOWNLOAD_URL\"\ncurl -L -o tshock.zip \"$DOWNLOAD_URL\"\n\nif [ ! -f \"tshock.zip\" ]; then\n    echo \"âŒ Failed to download TShock\"\n    exit 1\nfi\n\necho \"ðŸ“¦ Extracting TShock...\"\nunzip -o tshock.zip\nrm tshock.zip\n\n# Make executable\nchmod +x TerrariaServer.bin.x86_64 || chmod +x TShock.Server\n\n# Create default server config\necho \"âš™ï¸ Creating server configuration...\"\ncat > serverconfig.txt << EOF\nworld={{WORLD_PATH}}\nport={{SERVER_PORT}}\nmaxplayers={{MAX_PLAYERS}}\npassword={{SERVER_PASSWORD}}\nmotd={{SERVER_MOTD}}\nworldname={{WORLD_NAME}}\nautocreate={{WORLD_SIZE}}\ndifficulty={{DIFFICULTY}}\nseed={{WORLD_SEED}}\nlanguage={{LANGUAGE}}\nsecure=1\nnoupnp=1\nEOF\n\n# Create worlds directory\nmkdir -p worlds\n\necho \"âœ… Terraria TShock server installation completed!\"\necho \"ðŸŒ World will be created automatically on first start\"\necho \"ðŸŽ® Server ready to start!\"\necho \"ðŸ“Š Server will run on port ${SERVER_PORT}\"\necho \"ðŸ‘¥ Max players: ${MAX_PLAYERS}\"\necho \"ðŸŒ World: ${WORLD_NAME}\"",
      "container": "ghcr.io/pterodactyl/installers:debian",
      "entrypoint": "bash"
    }
  },
  "variables": [
    {
      "name": "Server Port",
      "description": "The port to bind the server to.",
      "env_variable": "SERVER_PORT",
      "default_value": "7777",
      "user_viewable": true,
      "user_editable": false,
      "rules": "required|numeric|min:1024|max:65535",
      "field_type": "text"
    },
    {
      "name": "Maximum Players",
      "description": "The maximum number of players that can join the server.",
      "env_variable": "MAX_PLAYERS",
      "default_value": "8",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|numeric|min:1|max:255",
      "field_type": "text"
    },
    {
      "name": "World Name",
      "description": "The name of the world file and the world itself.",
      "env_variable": "WORLD_NAME",
      "default_value": "PyroWorld",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:30",
      "field_type": "text"
    },
    {
      "name": "World Path",
      "description": "Path to the world file. Will be created automatically if it doesn't exist.",
      "env_variable": "WORLD_PATH",
      "default_value": "worlds/PyroWorld.wld",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:100",
      "field_type": "text"
    },
    {
      "name": "World Size",
      "description": "The size of the world. 1 = Small, 2 = Medium, 3 = Large",
      "env_variable": "WORLD_SIZE",
      "default_value": "2",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|numeric|in:1,2,3",
      "field_type": "text"
    },
    {
      "name": "World Difficulty",
      "description": "The difficulty of the world. 0 = Classic, 1 = Expert, 2 = Master, 3 = Journey",
      "env_variable": "DIFFICULTY",
      "default_value": "0",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|numeric|in:0,1,2,3",
      "field_type": "text"
    },
    {
      "name": "World Seed",
      "description": "The seed for world generation. Leave empty for random.",
      "env_variable": "WORLD_SEED",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:20",
      "field_type": "text"
    },
    {
      "name": "Server Password",
      "description": "The password required to join the server. Leave empty for no password.",
      "env_variable": "SERVER_PASSWORD",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:20",
      "field_type": "text"
    },
    {
      "name": "Server MOTD",
      "description": "The message of the day that appears when players join.",
      "env_variable": "SERVER_MOTD",
      "default_value": "Welcome to Pyro Terraria Server!",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:100",
      "field_type": "text"
    },
    {
      "name": "Language",
      "description": "Server language. 1 = English, 2 = German, 3 = Italian, 4 = French, 5 = Spanish, 6 = Russian, 7 = Chinese, 8 = Portuguese, 9 = Polish",
      "env_variable": "LANGUAGE",
      "default_value": "1",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|numeric|in:1,2,3,4,5,6,7,8,9",
      "field_type": "text"
    }
  ]
}